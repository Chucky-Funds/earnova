# ğŸ¬ Video Modal System - Architecture & Flow Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     EARNOVA PROFILE PAGE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              VIDEO TASKS SECTION                          â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Video Card 0 â”‚  â”‚ Video Card 1 â”‚  â”‚ Video Card 2 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ [Thumbnail]  â”‚  â”‚ [Thumbnail]  â”‚  â”‚ [Thumbnail]  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Watch Now â†—  â”‚  â”‚ Watch Now â†—  â”‚  â”‚ Watch Now â†—  â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚ Video Card 3 â”‚  â”‚ Video Card 4 â”‚  â”‚ Video Card 5 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ [Thumbnail]  â”‚  â”‚ [Thumbnail]  â”‚  â”‚ [Thumbnail]  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚ Watch Now â†—  â”‚  â”‚ Watch Now â†—  â”‚  â”‚ Watch Now â†—  â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†‘                                        â”‚
â”‚                   (User clicks card)                             â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         MODAL SYSTEM (Hidden by default)                 â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚         OVERLAY (rgba(0,0,0,0.5) + blur)         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚        MODAL CONTAINER (1200px max)         â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Video Task          [X close btn]   â”‚    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚    [YouTube Video Player 16:9]     â”‚    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                      â”‚    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Video 1 of 10     â‚¦50 + 8 XP       â”‚    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Click X, press Esc, or click outside â†     â”‚  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                    â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  vids.json   â”‚  (10 YouTube embed iframes)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fetchVideoData()             â”‚
â”‚ - HTTP GET vids.json         â”‚
â”‚ - Parse array of iframes     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ extractYouTubeId(embedCode)          â”‚
â”‚ - Parse src attribute                â”‚
â”‚ - Extract video ID                   â”‚
â”‚ - Example: "WUA81wTCU7A"            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transform to Video Objects                       â”‚
â”‚ {                                               â”‚
â”‚   index: 0,                                    â”‚
â”‚   videoId: "WUA81wTCU7A",                     â”‚
â”‚   thumbnail: "https://img.youtube.com/vi/..." â”‚
â”‚   title: "Video Task #1"                      â”‚
â”‚ }                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VIDEO_DATA.videos = [...]   â”‚  (Stored in memory)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                 â”‚
       â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ updateVideoCard      â”‚      â”‚ openVideoModal()     â”‚
â”‚ Thumbnails()        â”‚      â”‚ when clicked         â”‚
â”‚- Load images        â”‚      â”‚                      â”‚
â”‚- Apply backgrounds  â”‚      â”‚ 1. Get video data    â”‚
â”‚                      â”‚      â”‚ 2. Get reward info  â”‚
â”‚- Fallback gradient  â”‚      â”‚ 3. Create iframe    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ 4. Show modal       â”‚
                              â”‚ 5. Auto-play video  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Video Playing        â”‚
                              â”‚ - YouTube controls  â”‚
                              â”‚ - User can seek     â”‚
                              â”‚ - Auto-pauses on... â”‚
                              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚                  â”‚                  â”‚
                  â–¼                  â–¼                  â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Click X     â”‚    â”‚ Press Esc  â”‚    â”‚ Click Outside
          â”‚ Button      â”‚    â”‚ Key        â”‚    â”‚ Modal
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                 â”‚                  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                  â”‚
                           â–¼                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ closeVideoModal()            â”‚
                    â”‚ - Remove event listeners     â”‚
                    â”‚ - Hide overlay & modal       â”‚
                    â”‚ - Stop video (clear iframe)  â”‚
                    â”‚ - Restore focus             â”‚
                    â”‚ - Cleanup DOM                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    Modal Back to Hidden State
```

---

## User Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Page Loads          â”‚
â”‚  DOMContentLoaded    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ init()               â”‚
â”‚ init modal system    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ fetchVideoData()              â”‚
â”‚ updateVideoCardThumbnails()  â”‚
â”‚ setupEventListeners()        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Video Cards Ready with:         â”‚
â”‚ - Real YouTube thumbnails      â”‚
â”‚ - Click handlers attached      â”‚
â”‚ - Play button icons visible    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ User Sees Video Grid      â”‚
   â”‚ âœ“ Thumbnails loaded       â”‚
   â”‚ âœ“ Rewards visible         â”‚
   â”‚ âœ“ Cards responsive        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ (User action: click)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ openVideoModal(index)     â”‚
   â”‚ - Show overlay            â”‚
   â”‚ - Create iframe           â”‚
   â”‚ - Display modal           â”‚
   â”‚ - Auto-play video         â”‚
   â”‚ - Add Esc listener        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Video Player Active       â”‚
   â”‚ - YouTube controls ready  â”‚
   â”‚ - User can:               â”‚
   â”‚   â€¢ Play/Pause            â”‚
   â”‚   â€¢ Seek                  â”‚
   â”‚   â€¢ Change volume         â”‚
   â”‚   â€¢ Go fullscreen         â”‚
   â”‚   â€¢ Press Esc to close    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚
        â–¼             â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Watching   â”‚  â”‚ Exit     â”‚
   â”‚ Video      â”‚  â”‚ Early    â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ closeVideoModal()          â”‚
   â”‚ - Hide overlay & modal     â”‚
   â”‚ - Stop video              â”‚
   â”‚ - Clean up DOM            â”‚
   â”‚ - Remove event listeners  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Back to Video Grid        â”‚
   â”‚ Ready for next video      â”‚
   â”‚ or other actions          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Interaction Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       HTML / DOM Structure                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  profile.html (Content & Styling)                   â”‚
â”‚  â”œâ”€â”€ Modal Styles (.video-modal-*)                 â”‚
â”‚  â”œâ”€â”€ Video Card Styles (.video-task-card)          â”‚
â”‚  â”œâ”€â”€ Modal HTML Element                             â”‚
â”‚  â”‚   â”œâ”€â”€ Overlay (.video-modal-overlay)             â”‚
â”‚  â”‚   â”œâ”€â”€ Container (.video-modal-container)         â”‚
â”‚  â”‚   â”œâ”€â”€ Header (title + close btn)                 â”‚
â”‚  â”‚   â”œâ”€â”€ Body (player wrapper)                      â”‚
â”‚  â”‚   â””â”€â”€ Footer (info + reward)                     â”‚
â”‚  â”‚                                                   â”‚
â”‚  â””â”€â”€ Video Cards (renderAllTasks)                   â”‚
â”‚      â”œâ”€â”€ Thumbnail (.video-card-thumbnail)         â”‚
â”‚      â”œâ”€â”€ Play Icon (.video-card-play-icon)         â”‚
â”‚      â””â”€â”€ Buttons (Watch Now)                        â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â”‚                              â”‚
         â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Profile.html         â”‚      â”‚ Scripts.js         â”‚
â”‚ Inline JavaScript    â”‚      â”‚ External Module    â”‚
â”‚                      â”‚      â”‚                    â”‚
â”‚ Functions:           â”‚      â”‚ Functions:         â”‚
â”‚ â”œâ”€â”€ init()           â”‚      â”‚ â”œâ”€â”€ fetchVideoData()
â”‚ â”œâ”€â”€ createVideoCard()â”‚      â”‚ â”œâ”€â”€ openVideoModal()
â”‚ â”œâ”€â”€ renderAllTasks() â”‚      â”‚ â”œâ”€â”€ closeVideoModal()
â”‚ â””â”€â”€ getVideoReward() â”‚      â”‚ â”œâ”€â”€ initVideoModal()
â”‚                      â”‚      â”‚ â””â”€â”€ (5 more...)    â”‚
â”‚ Event Handlers:      â”‚      â”‚                    â”‚
â”‚ â”œâ”€â”€ onclick          â”‚      â”‚ Event Setup:       â”‚
â”‚ â”œâ”€â”€ addEventListener â”‚      â”‚ â”œâ”€â”€ DOMContentLoaded
â”‚ â””â”€â”€ toggleSidebar    â”‚      â”‚ â”œâ”€â”€ click X button 
â”‚                      â”‚      â”‚ â”œâ”€â”€ click overlay  â”‚
â”‚                      â”‚      â”‚ â””â”€â”€ keydown (Esc)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ State Management        â”‚
            â”‚ VIDEO_DATA {           â”‚
            â”‚  - videos: [],         â”‚
            â”‚  - currentIndex: null  â”‚
            â”‚ }                      â”‚
            â”‚ localStorage {         â”‚
            â”‚  - balance             â”‚
            â”‚  - transactions        â”‚
            â”‚  - theme               â”‚
            â”‚ }                      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CSS Cascade & Specificity

```
Global Styles (Reset)
    â”‚
    â”œâ”€â”€ :root (CSS Variables)
    â”‚   â”œâ”€â”€ Light theme defaults
    â”‚   â””â”€â”€ Dark theme overrides [data-theme="dark"]
    â”‚
    â”œâ”€â”€ Base Styles
    â”‚   â”œâ”€â”€ body, a, button, input
    â”‚   â””â”€â”€ Scrollbar styling
    â”‚
    â”œâ”€â”€ Layout (Grid, Flexbox)
    â”‚   â”œâ”€â”€ .app-container
    â”‚   â”œâ”€â”€ .sidebar
    â”‚   â”œâ”€â”€ .main-wrapper
    â”‚   â””â”€â”€ .main-content
    â”‚
    â”œâ”€â”€ Existing Components
    â”‚   â”œâ”€â”€ .card
    â”‚   â”œâ”€â”€ .task-card
    â”‚   â”œâ”€â”€ .btn (button styles)
    â”‚   â””â”€â”€ Others...
    â”‚
    â””â”€â”€ VIDEO MODAL SYSTEM
        â”œâ”€â”€ .video-modal-overlay (highest spec)
        â”œâ”€â”€ .video-modal-container
        â”œâ”€â”€ .video-modal-header/title/close
        â”œâ”€â”€ .video-modal-body/wrapper
        â”œâ”€â”€ .video-modal-footer/info/reward
        â”œâ”€â”€ .video-card-thumbnail
        â”œâ”€â”€ .video-card-play-icon
        â”‚
        â””â”€â”€ Responsive Breakpoints
            â”œâ”€â”€ @media (max-width: 1024px)
            â”œâ”€â”€ @media (max-width: 768px)
            â”œâ”€â”€ @media (max-width: 480px)
            â””â”€â”€ Theme Overrides
                â””â”€â”€ [data-theme="dark"] .video-modal-*
```

---

## Event Listener Chain

```
Window Events
    â”‚
    â””â”€â”€ DOMContentLoaded
        â””â”€â”€ init()
            â”œâ”€â”€ applyTheme()
            â”œâ”€â”€ updateBalanceUI()
            â”œâ”€â”€ renderTransactions()
            â”œâ”€â”€ renderAllTasks()
            â”‚   â””â”€â”€ createVideoCard() x 6
            â”œâ”€â”€ initCharts()
            â”‚
            â””â”€â”€ Navigation Setup
                â””â”€â”€ .nav-item.addEventListener('click')
                    â””â”€â”€ switchTab()
                â”‚
                â””â”€â”€ Theme Toggle
                    â””â”€â”€ #theme-toggle.addEventListener('click')
                        â””â”€â”€ applyTheme()
                
                â””â”€â”€ Video Modal Init
                    â””â”€â”€ initVideoModalSystem()
                        â”œâ”€â”€ fetchVideoData()
                        â”‚   â””â”€â”€ updateVideoCardThumbnails()
                        â”‚
                        â”œâ”€â”€ #video-modal-close
                        â”‚   â””â”€â”€ addEventListener('click')
                        â”‚       â””â”€â”€ closeVideoModal()
                        â”‚
                        â”œâ”€â”€ #video-modal-overlay
                        â”‚   â””â”€â”€ addEventListener('click')
                        â”‚       â””â”€â”€ closeVideoModal()
                        â”‚
                        â””â”€â”€ Document (Escape key)
                            â””â”€â”€ addEventListener('keydown')
                                â””â”€â”€ handleModalKeydown()
                                    â””â”€â”€ closeVideoModal()


Video Card Events
    â”‚
    â”œâ”€â”€ .video-card-thumbnail
    â”‚   â””â”€â”€ onclick="openVideoModal(index)"
    â”‚       â”œâ”€â”€ Show overlay
    â”‚       â”œâ”€â”€ Create iframe
    â”‚       â”œâ”€â”€ Add Esc listener
    â”‚       â””â”€â”€ Auto-play video
    â”‚
    â””â”€â”€ .btn.btn-primary
        â””â”€â”€ onclick="openVideoModal(index)"
            â””â”€â”€ (Same as above)
```

---

## State Lifecycle Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INITIAL STATE                  â”‚
â”‚                                  â”‚
â”‚  VIDEO_DATA = {                 â”‚
â”‚    videos: [],                  â”‚
â”‚    currentIndex: null           â”‚
â”‚  }                              â”‚
â”‚                                  â”‚
â”‚  Modal: Hidden                   â”‚
â”‚  Overlay: Inactive               â”‚
â”‚  Body: Scrollable                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ (DOMContentLoaded)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LOADING STATE                  â”‚
â”‚                                  â”‚
â”‚  Fetching vids.json...           â”‚
â”‚  Parsing videos...               â”‚
â”‚  Loading thumbnails...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€ Success â”€â”€â”
               â”‚            â”‚
               â–¼            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Ready    â”‚  â”‚ Error State  â”‚
        â”‚ State    â”‚  â”‚              â”‚
        â”‚          â”‚  â”‚ Show message â”‚
        â”‚ videos   â”‚  â”‚ Retry option â”‚
        â”‚ loaded   â”‚  â”‚              â”‚
        â”‚ ready    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ for      â”‚
        â”‚ viewing  â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼ (User clicks video)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MODAL OPEN STATE               â”‚
â”‚                                  â”‚
â”‚  VIDEO_DATA = {                 â”‚
â”‚    videos: [...],               â”‚
â”‚    currentIndex: 0 (or N)       â”‚
â”‚  }                              â”‚
â”‚                                  â”‚
â”‚  Modal: Visible (animating in)  â”‚
â”‚  Overlay: Active (blurred bg)   â”‚
â”‚  Body: Locked (no scroll)       â”‚
â”‚  Iframe: Loading video          â”‚
â”‚  Esc listener: Active            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
          â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”‚          â”‚
          â–¼          â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Click X â”‚ â”‚Press   â”‚  â”‚Click   â”‚
    â”‚Button  â”‚ â”‚Esc Key â”‚  â”‚Outside â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
         â”‚          â”‚           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MODAL CLOSING STATE            â”‚
â”‚                                  â”‚
â”‚  Removing listeners...           â”‚
â”‚  Hiding modal (fade out)...      â”‚
â”‚  Clearing iframe...              â”‚
â”‚  Unlocking body scroll...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼ (After 300ms)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   BACK TO READY STATE            â”‚
â”‚                                  â”‚
â”‚  VIDEO_DATA = {                 â”‚
â”‚    videos: [...],               â”‚
â”‚    currentIndex: null (reset)   â”‚
â”‚  }                              â”‚
â”‚                                  â”‚
â”‚  Modal: Hidden                   â”‚
â”‚  Overlay: Inactive               â”‚
â”‚  Body: Scrollable                â”‚
â”‚  Ready for next video...         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Performance & Memory Flow

```
Page Load
â”œâ”€â”€ DOMContentLoaded triggered
â”‚   â””â”€â”€ init() function calls
â”‚       â”œâ”€â”€ Load CSS (inline) - 50KB
â”‚       â”œâ”€â”€ Load Scripts (inline) - 30KB
â”‚       â””â”€â”€ Load scripts.js (external) - 15KB
â”‚
â”œâ”€â”€ fetchVideoData() starts
â”‚   â”œâ”€â”€ HTTP GET vids.json (~2KB)
â”‚   â””â”€â”€ Parse & store in VIDEO_DATA (~5KB)
â”‚
â”œâ”€â”€ updateVideoCardThumbnails() starts
â”‚   â”œâ”€â”€ Preload 6 images async (~100KB)
â”‚   â””â”€â”€ Background load (non-blocking)
â”‚
â””â”€â”€ Ready for interaction (~102KB total)

Modal Open
â”œâ”€â”€ openVideoModal(index)
â”‚   â”œâ”€â”€ Create iframe element (~1KB)
â”‚   â”œâ”€â”€ Load YouTube iframe (~500KB from YT CDN)
â”‚   â”œâ”€â”€ Add event listeners (~1KB)
â”‚   â””â”€â”€ Show DOM (transition) - 0 layout shifts
â”‚
â””â”€â”€ Playing video (~600KB total)

Modal Close
â”œâ”€â”€ closeVideoModal()
â”‚   â”œâ”€â”€ Remove event listeners
â”‚   â”œâ”€â”€ Remove iframe (~500KB freed)
â”‚   â”œâ”€â”€ Clear DOM
â”‚   â””â”€â”€ Restore focus
â”‚
â””â”€â”€ Back to Ready (~102KB)
```

---

## Browser Compatibility Matrix

```
Feature               Chrome  Firefox  Safari  Edge   Mobile*
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Modal Display         âœ“       âœ“        âœ“       âœ“      âœ“
CSS Grid/Flex         âœ“       âœ“        âœ“       âœ“      âœ“
Backdrop Filter       âœ“       âœ“        âœ“       âœ“      âœ“
CSS Variables         âœ“       âœ“        âœ“       âœ“      âœ“
Fetch API             âœ“       âœ“        âœ“       âœ“      âœ“
ES6 Classes/Arrow     âœ“       âœ“        âœ“       âœ“      âœ“
Transform/Opacity     âœ“       âœ“        âœ“       âœ“      âœ“
YouTube Embed         âœ“       âœ“        âœ“       âœ“      âœ“
Touch Events          âœ“       âœ“        âœ“       âœ“      âœ“
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

* Mobile: iOS Safari, Chrome Mobile, Samsung Browser
```

---

## This architecture ensures:
âœ… **Modularity** - Separate concerns (DOM, JS, CSS)
âœ… **Maintainability** - Clear hierarchy and organization
âœ… **Performance** - Efficient DOM manipulation and event handling
âœ… **Responsiveness** - Adaptable to all screen sizes
âœ… **Accessibility** - Keyboard and screen reader support
âœ… **Scalability** - Easy to add more videos or features

